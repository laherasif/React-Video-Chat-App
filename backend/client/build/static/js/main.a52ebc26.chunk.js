(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{100:function(e,a,t){},128:function(e,a){},130:function(e,a){},141:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t(9),i=t.n(c),r=(t(100),t(171)),s=t(173),l=t(169),o=t(4),j=Object(l.a)({appbar:{height:"60px"},heading:{textAlign:"center",fontWeight:"bold",paddingTop:"15px",fontSize:"25px"}});var d=function(){var e=j();return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(r.a,{position:"static",className:e.appbar,children:Object(o.jsx)(s.a,{varient:"h2",className:e.heading,children:"Video Chat App "})})})},b=t(44),u=t(174),m=t(175),x=t(143),O=t(28),p=t(86),h=t(61),f=t.n(h),g=Object(p.a)("https://video-chats-app.herokuapp.com/"),v=Object(n.createContext)(),N=function(e){var a=e.children,t=Object(n.useState)(),c=Object(O.a)(t,2),i=c[0],r=c[1],s=Object(n.useState)(""),l=Object(O.a)(s,2),j=l[0],d=l[1],b=Object(n.useState)({}),u=Object(O.a)(b,2),m=u[0],x=u[1],p=Object(n.useState)(!1),h=Object(O.a)(p,2),N=h[0],w=h[1],C=Object(n.useState)(!1),y=Object(O.a)(C,2),_=y[0],k=y[1],I=Object(n.useState)(""),S=Object(O.a)(I,2),A=S[0],T=S[1],U=Object(n.useRef)(),R=Object(n.useRef)(),E=Object(n.useRef)();Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){r(e),U.current.srcObject=e})),g.on("me",(function(e){return d(e)})),g.on("callUser",(function(e){var a=e.from,t=e.name,n=e.signal;x({isReceivingCall:!0,from:a,name:t,signal:n})}))}),[]);return Object(o.jsx)(v.Provider,{value:{stream:i,me:j,call:m,callaccpted:N,callEnd:_,name:A,setName:T,myVideo:U,userVideo:R,callAnswer:function(){w(!0);var e=new f.a({initiator:!1,trickle:!1,stream:i});e.on("signal",(function(e){g.emit("answerCall",{signal:e,to:m.from})})),e.on("stream",(function(e){R.current.srcObject=e})),e.signal(m.signal),E.current=e},callUser:function(e){var a=new f.a({initiator:!0,trickle:!1,stream:i});a.on("signal",(function(a){g.emit("callUser",{userToCall:e,signalData:a,from:j,name:A})})),a.on("stream",(function(e){R.current.srcObject=e})),g.on("callacepted",(function(e){w(!0),a.signal(e)})),E.current=a},leaveCall:function(){k(!0),E.current.destroy(),window.location.reload()}},children:a})},w=Object(l.a)((function(e){var a;return{root:{marginTop:"20px"},padding:{padding:"20px"},video:(a={width:"500px"},Object(b.a)(a,e.breakpoints.down("md"),{width:"450px"}),Object(b.a)(a,e.breakpoints.down("xs"),{width:"300px"}),a)}}));var C=function(){var e=w(),a=Object(n.useContext)(v),t=a.myVideo,c=a.userVideo,i=a.stream,r=a.call,l=a.name,j=a.callaccpted,d=a.callEnd;return Object(o.jsx)(u.a,{children:Object(o.jsxs)(m.a,{container:!0,className:e.root,children:[Object(o.jsx)(m.a,{item:!0,xs:12,md:6,children:i&&Object(o.jsxs)(x.a,{className:e.padding,children:[Object(o.jsx)(s.a,{varient:"h4",children:l||"Name"}),Object(o.jsx)("video",{playsInline:!0,muted:!0,ref:t,autoPlay:!0,className:e.video})]})}),Object(o.jsx)(m.a,{item:!0,xs:12,md:6,children:j&&!d&&Object(o.jsxs)(x.a,{className:e.padding,children:[Object(o.jsx)(s.a,{varient:"h4",children:r.name}),Object(o.jsx)("video",{playsInline:!0,ref:c,autoPlay:!0,className:e.video})]})})]})})},y=t(180),_=t(179),k=t(181),I=t(176),S=t(177),A=t(178),T=t(85),U=Object(l.a)((function(e){var a;return{container:{marginTop:"20px"},paper:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},box:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},account_head:{fontSize:"20px",fontWeight:"bold"},account_name:(a={width:"400px"},Object(b.a)(a,e.breakpoints.down("xs"),{width:"70%"}),Object(b.a)(a,"margin","auto"),a),account_btn:{width:"100%",marginTop:"20px",marginBottom:"10px"},answer_box:{padding:"10px",textAlign:"center"},answer_btn:{width:"100%",matginTop:"10px"}}}));var R=function(){var e=U(),a=Object(n.useContext)(v),t=a.name,c=a.setName,i=a.me,r=a.callUser,l=a.leaveCall,j=a.call,d=a.callaccpted,b=a.callEnd,p=a.callAnswer,h=Object(n.useState)(""),f=Object(O.a)(h,2),g=f[0],N=f[1];return Object(o.jsx)(u.a,{children:Object(o.jsxs)(m.a,{container:!0,className:e.container,spacing:3,children:[Object(o.jsx)(m.a,{item:!0,xs:12,md:6,children:Object(o.jsxs)(x.a,{className:e.paper,children:[!j.isReceivingCall&&!d&&Object(o.jsxs)(y.a,{className:e.box,children:[Object(o.jsx)(s.a,{className:e.account_head,children:"User Account Information"}),Object(o.jsx)(_.a,{label:"Name",className:e.account_name,value:t,onChange:function(e){return c(e.target.value)}}),Object(o.jsx)(T.CopyToClipboard,{text:i,children:Object(o.jsx)(k.a,{className:e.account_btn,variant:"contained",color:"primary",startIcon:Object(o.jsx)(I.a,{}),children:"Copy Your Id "})})]}),j.isReceivingCall&&!d&&Object(o.jsxs)(y.a,{className:e.answer_box,children:[Object(o.jsxs)(s.a,{className:e.account_head,children:[j.name," Calling to You "]}),Object(o.jsx)(k.a,{className:e.answer_btn,variant:"contained",color:"primary",onClick:p,children:"Answer"})]})]})}),Object(o.jsx)(m.a,{item:!0,xs:12,md:6,children:Object(o.jsx)(x.a,{className:e.paper,children:Object(o.jsxs)(y.a,{className:e.box,children:[Object(o.jsx)(s.a,{className:e.account_head,children:"Make a Call With Friend "}),Object(o.jsx)(_.a,{label:"Id of Friend",className:e.account_name,value:g,onChange:function(e){return N(e.target.value)}}),d&&!b?Object(o.jsx)(k.a,{variant:"contained",className:e.account_btn,color:"secondary",startIcon:Object(o.jsx)(S.a,{fontSize:"large"}),onClick:l,children:"Hang Up"}):Object(o.jsx)(k.a,{variant:"contained",className:e.account_btn,color:"primary",startIcon:Object(o.jsx)(A.a,{fontSize:"large"}),onClick:function(){return r(g)},children:"Call"})]})})})]})})};var E=function(){return Object(o.jsxs)("div",{children:[Object(o.jsx)(d,{}),Object(o.jsx)(C,{}),Object(o.jsx)(R,{})]})};i.a.render(Object(o.jsx)(N,{children:Object(o.jsx)(E,{})}),document.getElementById("root"))}},[[141,1,2]]]);
//# sourceMappingURL=main.a52ebc26.chunk.js.map