{"version":3,"sources":["components/Navbar.jsx","socket.js","components/Videoplayer.jsx","components/Information.jsx","App.js","index.js"],"names":["useStyle","makeStyles","appbar","height","heading","textAlign","fontWeight","paddingTop","fontSize","Navbar","classes","AppBar","position","className","Typography","varient","socket","io","SocketContext","createContext","SocketProvider","children","useState","stream","setStream","me","setMe","call","setCall","callaccpted","setCallaccpted","callEnd","setCallEnd","name","setName","myVideo","useRef","userVideo","currentRef","useEffect","navigator","mediaDevices","getUserMedia","video","audio","then","userStream","current","srcObject","on","id","from","callerName","signal","isReceivingCall","Provider","value","callAnswer","peer","Peer","initiator","trickle","data","emit","to","currentStream","callUser","peers","userToCall","signalData","leaveCall","destroy","window","location","reload","theme","root","marginTop","padding","width","breakpoints","down","Videoplayer","useContext","Container","Grid","container","item","xs","md","Paper","playsInline","muted","ref","autoPlay","paper","display","flexDirection","justifyContent","alignItems","box","account_head","account_name","account_btn","marginBottom","answer_box","answer_btn","matginTop","Information","callToUser","setCallToUser","spacing","Box","TextField","label","onChange","e","target","text","Button","variant","color","startIcon","Assignment","onClick","PhoneDisabled","Phone","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a52ebc26.chunk.js","sourcesContent":["import React from 'react'\r\nimport { AppBar , Typography , } from '@material-ui/core'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyle = makeStyles({\r\n    appbar:{\r\n        height: '60px',\r\n    },\r\n    heading:{\r\n        textAlign :'center',\r\n        fontWeight : \"bold\",\r\n        paddingTop : '15px',\r\n        fontSize : '25px'\r\n\r\n    }\r\n})\r\n\r\nfunction Navbar() {\r\n    const classes = useStyle()\r\n    return (\r\n        <>\r\n        <AppBar position=\"static\" className={classes.appbar} >\r\n          <Typography varient=\"h2\" className={classes.heading}>Video Chat App </Typography>\r\n        </AppBar>\r\n            \r\n        </>\r\n    )\r\n}\r\n\r\nexport default Navbar\r\n","import { createContext, useState, useEffect, useRef } from 'react'\r\nimport { io } from 'socket.io-client'\r\nimport Peer from 'simple-peer'\r\n\r\nconst socket = io('https://video-chats-app.herokuapp.com/')\r\n\r\nconst SocketContext = createContext()\r\nconst SocketProvider = ({ children }) => {\r\n\r\n  const [stream, setStream] = useState()\r\n  const [me, setMe] = useState('')\r\n  const [call, setCall] = useState({})\r\n  const [callaccpted, setCallaccpted] = useState(false)\r\n  const [callEnd, setCallEnd] = useState(false)\r\n  const [name, setName] = useState('')\r\n\r\n  const myVideo = useRef()\r\n  const userVideo = useRef()\r\n  const currentRef = useRef()\r\n\r\n  useEffect(() => {\r\n    navigator.mediaDevices.getUserMedia({ video: true, audio: true })\r\n      .then((userStream) => {\r\n        setStream(userStream)\r\n        myVideo.current.srcObject = userStream\r\n\r\n      });\r\n\r\n    socket.on('me', (id) => setMe(id))\r\n\r\n    socket.on('callUser', ({ from, name: callerName, signal }) => {\r\n      setCall({ isReceivingCall: true, from, name: callerName, signal });\r\n    });\r\n\r\n   \r\n\r\n  }, [])\r\n\r\n\r\n\r\n  const callAnswer = () => {\r\n    setCallaccpted(true)\r\n    const peer = new Peer({ initiator: false, trickle: false, stream })\r\n    peer.on('signal', (data) => {\r\n      socket.emit('answerCall', { signal: data, to: call.from })\r\n    })\r\n\r\n    peer.on('stream', (currentStream) => {\r\n      userVideo.current.srcObject = currentStream\r\n    })\r\n    peer.signal(call.signal)\r\n    currentRef.current = peer;\r\n  }\r\n\r\n\r\n  const callUser = (id) => {\r\n    const peers = new Peer({ initiator: true, trickle: false, stream })\r\n    peers.on('signal', (data) => {\r\n      socket.emit('callUser', { userToCall: id, signalData: data, from: me, name })\r\n    })\r\n\r\n    peers.on('stream', (currentStream) => {\r\n      userVideo.current.srcObject = currentStream\r\n    })\r\n\r\n    socket.on('callacepted', (signal) => {\r\n      setCallaccpted(true)\r\n      peers.signal(signal)\r\n    })\r\n\r\n    currentRef.current = peers;\r\n\r\n\r\n  }\r\n\r\n  const leaveCall = () => {\r\n    setCallEnd(true)\r\n    currentRef.current.destroy()\r\n\r\n    window.location.reload()\r\n\r\n  }\r\n\r\n  return (\r\n    <SocketContext.Provider value={{\r\n      stream,\r\n      me,\r\n      call,\r\n      callaccpted,\r\n      callEnd,\r\n      name,\r\n      setName,\r\n      myVideo,\r\n      userVideo,\r\n      callAnswer,\r\n      callUser,\r\n      leaveCall,\r\n    }}>\r\n      {children}\r\n    </SocketContext.Provider>\r\n  )\r\n\r\n\r\n}\r\n\r\n\r\nexport { SocketContext, SocketProvider }\r\n\r\n\r\n","import { useContext } from 'react'\r\nimport { Grid, Container, Typography, Paper } from '@material-ui/core'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { SocketContext } from '../socket'\r\nconst useStyle = makeStyles((theme) => ({\r\n    root: {\r\n        marginTop: '20px'\r\n    },\r\n    padding: {\r\n        padding: '20px'\r\n    },\r\n    video: {\r\n        width: '500px',\r\n        [theme.breakpoints.down('md')]: {\r\n            width: '450px',\r\n        },\r\n        [theme.breakpoints.down('xs')]: {\r\n            width: '300px',\r\n        },\r\n    }\r\n}))\r\n\r\nfunction Videoplayer() {\r\n    const classes = useStyle()\r\n    const { myVideo, userVideo, stream, call, name, callaccpted, callEnd } = useContext(SocketContext)\r\n    return (\r\n        <Container>\r\n            <Grid container className={classes.root} >\r\n                <Grid item xs={12} md={6} >\r\n                    {stream && (\r\n                        <Paper className={classes.padding}>\r\n                            <Typography varient=\"h4\" >{name || \"Name\"}</Typography>\r\n                            <video playsInline muted ref={myVideo} autoPlay className={classes.video} />\r\n                        </Paper>\r\n                    )\r\n                    }\r\n                </Grid>\r\n                <Grid item xs={12} md={6}>\r\n                    {callaccpted && !callEnd && (\r\n                        <Paper className={classes.padding}>\r\n                            <Typography varient=\"h4\">{call.name}</Typography>\r\n                            <video playsInline ref={userVideo} autoPlay className={classes.video} />\r\n                        </Paper>\r\n                    )\r\n                    }\r\n                </Grid>\r\n            </Grid>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default Videoplayer\r\n","import { useContext, useState } from 'react'\r\nimport { Paper, Typography, Button, TextField, Grid, Container, Box } from '@material-ui/core'\r\nimport { Phone, Assignment, PhoneDisabled } from '@material-ui/icons'\r\nimport { CopyToClipboard } from 'react-copy-to-clipboard'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { SocketContext } from '../socket'\r\nlet useStyle = makeStyles((theme) => ({\r\n    container: {\r\n        marginTop: '20px'\r\n    },\r\n    paper: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    box: {\r\n\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    account_head: {\r\n        fontSize: '20px',\r\n        fontWeight: 'bold'\r\n    },\r\n    account_name: {\r\n        width: '400px',\r\n        [theme.breakpoints.down('xs')]: {\r\n            width: '70%'\r\n        },\r\n        margin: 'auto'\r\n    },\r\n    account_btn: {\r\n        width: '100%',\r\n        marginTop: '20px',\r\n        marginBottom: '10px',\r\n    },\r\n    answer_box:{\r\n        padding:'10px',\r\n        textAlign:'center'\r\n    },\r\n    answer_btn:{\r\n        width: '100%',\r\n        matginTop:'10px'\r\n    }\r\n\r\n}))\r\nfunction Information() {\r\n    const classes = useStyle()\r\n    const { name, setName, me, callUser, leaveCall, call, callaccpted, callEnd, callAnswer } = useContext(SocketContext)\r\n    const [callToUser, setCallToUser] = useState('')\r\n    return (\r\n\r\n        <Container>\r\n            <Grid container className={classes.container} spacing={3}>\r\n                <Grid item xs={12} md={6} >\r\n                    <Paper className={classes.paper}>\r\n                    {!call.isReceivingCall && !callaccpted && (\r\n                        <Box className={classes.box} >\r\n                            <Typography className={classes.account_head}>User Account Information</Typography>\r\n                            <TextField label=\"Name\" className={classes.account_name} value={name} onChange={(e) => setName(e.target.value)} />\r\n                            <CopyToClipboard text={me}>\r\n                                <Button className={classes.account_btn} variant=\"contained\" color=\"primary\" startIcon={<Assignment />}  >Copy Your Id </Button>\r\n                            </CopyToClipboard>\r\n                        </Box>\r\n                    )}\r\n                        {call.isReceivingCall && !callaccpted && (\r\n                            <Box className={classes.answer_box}>\r\n                                <Typography className={classes.account_head} >{call.name} Calling to You </Typography>\r\n                                <Button className={classes.answer_btn} variant=\"contained\" color=\"primary\" onClick={callAnswer}  >Answer</Button>\r\n                            </Box>\r\n                        )}\r\n                    </Paper>\r\n                </Grid>\r\n                <Grid item xs={12} md={6} >\r\n                    <Paper className={classes.paper}>\r\n                        <Box className={classes.box} >\r\n                            <Typography className={classes.account_head}>Make a Call With Friend </Typography>\r\n                            <TextField label=\"Id of Friend\" className={classes.account_name} value={callToUser} onChange={(e) => setCallToUser(e.target.value)} />\r\n                            {callaccpted && !callEnd ? (\r\n                                <Button variant=\"contained\" className={classes.account_btn} color=\"secondary\" startIcon={<PhoneDisabled fontSize=\"large\" />} onClick={leaveCall} >\r\n                                    Hang Up\r\n                </Button>\r\n                            ) : (\r\n                                    <Button variant=\"contained\" className={classes.account_btn} color=\"primary\" startIcon={<Phone fontSize=\"large\" />} onClick={() => callUser(callToUser)} >\r\n                                        Call\r\n                </Button>\r\n                                )}\r\n                        </Box>\r\n\r\n                    </Paper></Grid>\r\n            </Grid>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default Information\r\n","import './App.css'\r\nimport Navbar from './components/Navbar'\r\nimport Videoplayer from './components/Videoplayer'\r\nimport Information from './components/Information'\r\nfunction App() {\r\n  return (\r\n    <div>\r\n      <Navbar/>\r\n      <Videoplayer/>\r\n      <Information/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport { SocketProvider } from './socket'\r\n\r\nReactDOM.render(\r\n  <SocketProvider>\r\n    <App />\r\n  </SocketProvider>\r\n\r\n  ,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}